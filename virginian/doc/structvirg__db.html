<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Virginian: virg_db Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Virginian</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">virg_db Struct Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="virg_db" -->
<p>State of the currently open database.  
 <a href="structvirg__db.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="virginian_8h_source.html">virginian.h</a>&gt;</code></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a76f65c11efb2f4331dda033edfa513c2"></a><!-- doxytag: member="virg_db::num_tablets" ref="a76f65c11efb2f4331dda033edfa513c2" args="" -->
unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvirg__db.html#a76f65c11efb2f4331dda033edfa513c2">num_tablets</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of tablets on disk <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a071548caca50ad0408ca5f81cd82d898"></a><!-- doxytag: member="virg_db::alloced_tablets" ref="a071548caca50ad0408ca5f81cd82d898" args="" -->
unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvirg__db.html#a071548caca50ad0408ca5f81cd82d898">alloced_tablets</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of <a class="el" href="structvirg__tablet__info.html" title="Information associated with a tablet on disk.">virg_tablet_info</a> structs that have been allocated <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6657ccb6b05ec1b98ff5d5e868f4e1bc"></a><!-- doxytag: member="virg_db::tablet_id_counter" ref="a6657ccb6b05ec1b98ff5d5e868f4e1bc" args="" -->
unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvirg__db.html#a6657ccb6b05ec1b98ff5d5e868f4e1bc">tablet_id_counter</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">used to assign unique ids to each data and result tablet <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3c79e95bc329543a931b29c57a4a829b"></a><!-- doxytag: member="virg_db::block_size" ref="a3c79e95bc329543a931b29c57a4a829b" args="" -->
size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvirg__db.html#a3c79e95bc329543a931b29c57a4a829b">block_size</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">size of this struct plus all the <a class="el" href="structvirg__tablet__info.html" title="Information associated with a tablet on disk.">virg_tablet_info</a> structs <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a581c152d798171bbe487a67b4e2d1471"></a><!-- doxytag: member="virg_db::tables" ref="a581c152d798171bbe487a67b4e2d1471" args="[VIRG_MAX_TABLES][VIRG_MAX_TABLE_NAME]" -->
char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvirg__db.html#a581c152d798171bbe487a67b4e2d1471">tables</a> [VIRG_MAX_TABLES][VIRG_MAX_TABLE_NAME]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">maps table id to name <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1e3f0138b4b0b6b9e631fae4dad9f7a1"></a><!-- doxytag: member="virg_db::first_tablet" ref="a1e3f0138b4b0b6b9e631fae4dad9f7a1" args="[VIRG_MAX_TABLES]" -->
unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvirg__db.html#a1e3f0138b4b0b6b9e631fae4dad9f7a1">first_tablet</a> [VIRG_MAX_TABLES]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">maps table id to the id of its first tablet <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac8560755766ec57cc30bd45c972242bd"></a><!-- doxytag: member="virg_db::last_tablet" ref="ac8560755766ec57cc30bd45c972242bd" args="[VIRG_MAX_TABLES]" -->
unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvirg__db.html#ac8560755766ec57cc30bd45c972242bd">last_tablet</a> [VIRG_MAX_TABLES]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">maps table id to the id of its last tablet <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aab4e0db684c30a32f0cc82f25274c576"></a><!-- doxytag: member="virg_db::write_cursor" ref="aab4e0db684c30a32f0cc82f25274c576" args="[VIRG_MAX_TABLES]" -->
unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvirg__db.html#aab4e0db684c30a32f0cc82f25274c576">write_cursor</a> [VIRG_MAX_TABLES]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">tablet id of the current write location for adding rows to a table <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acd5ea5ce0d1eaf0910665ba8db39161c"></a><!-- doxytag: member="virg_db::table_tablets" ref="acd5ea5ce0d1eaf0910665ba8db39161c" args="[VIRG_MAX_TABLES]" -->
unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvirg__db.html#acd5ea5ce0d1eaf0910665ba8db39161c">table_tablets</a> [VIRG_MAX_TABLES]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">number of tablets for each table <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5f9dfe5476b490458ef529b57508cfb2"></a><!-- doxytag: member="virg_db::table_status" ref="a5f9dfe5476b490458ef529b57508cfb2" args="[VIRG_MAX_TABLES]" -->
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvirg__db.html#a5f9dfe5476b490458ef529b57508cfb2">table_status</a> [VIRG_MAX_TABLES]</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">note which table slots have been used <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a26636f8d326509af7c3faa1d41e76472"></a><!-- doxytag: member="virg_db::tablet_info" ref="a26636f8d326509af7c3faa1d41e76472" args="" -->
<a class="el" href="structvirg__tablet__info.html">virg_tablet_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structvirg__db.html#a26636f8d326509af7c3faa1d41e76472">tablet_info</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">pointer to the block allocated to store <a class="el" href="structvirg__tablet__info.html" title="Information associated with a tablet on disk.">virg_tablet_info</a> structs <br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>State of the currently open database. </p>
<p>This structure is used to manage the database file that is currently open in the database. It is the head of the database file, is loaded into memory when the database is opened, and is accessed in memory until the database is closed, when it is written to the start of the table. This has a fixed size, but the list of tablets in the database managed with <a class="el" href="structvirg__tablet__info.html" title="Information associated with a tablet on disk.">virg_tablet_info</a> structs necessarily has a variable size, and is stored just after this on disk.</p>
<p>Note that the fd (file descriptor) variable is meaningless when this data is written to disk. </p>

<p>Definition at line <a class="el" href="virginian_8h_source.html#l00440">440</a> of file <a class="el" href="virginian_8h_source.html">virginian.h</a>.</p>
</div><hr/>The documentation for this struct was generated from the following file:<ul>
<li>src/<a class="el" href="virginian_8h_source.html">virginian.h</a></li>
</ul>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Wed Feb 15 2012 01:21:46 for Virginian by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
